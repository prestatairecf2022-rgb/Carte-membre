<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>VÃ©rification Carte</title>

<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  margin-top: 60px;
}

.nom-prenom {
  font-size: 28px;
  font-weight: bold;
}

.titre {
  font-size: 20px;
  margin: 10px 0;
}

.valide { color: green; font-size: 22px; }
.suspendue { color: orange; font-size: 22px; }
.nonvalide { color: red; font-size: 22px; }
</style>
</head>

<body>

<p class="nom-prenom" id="nomPrenom"></p>
<p class="titre">France Alumni BÃ©nin</p>
<p id="message">Chargement...</p>

<script>

// ðŸ‘‰ REMPLACE PAR TON LIEN CSV PUBLIÃ‰
const CSV_URL = "COLLE_TON_LIEN_CSV_ICI";

// Lire code depuis URL
const params = new URLSearchParams(window.location.search);
const code = params.get("id");

const nomPrenom = document.getElementById("nomPrenom");
const message = document.getElementById("message");

if (!code) {
  message.textContent = "Aucun code dÃ©tectÃ©.";
  message.className = "nonvalide";
}

// Charger la base Google Sheet
fetch(CSV_URL)
.then(response => response.text())
.then(data => {

  const lignes = data.split("\n").slice(1); // enlever en-tÃªte

  let trouve = false;

  lignes.forEach(ligne => {
    const colonnes = ligne.split(",");

    const nom = colonnes[0];
    const prenom = colonnes[1];
    const codeSheet = colonnes[6];
    const statut = colonnes[9];

    if (codeSheet === code) {
      trouve = true;

      nomPrenom.textContent = nom + " " + prenom;

      if (statut === "Valide") message.className = "valide";
      else if (statut === "Suspendue") message.className = "suspendue";
      else message.className = "nonvalide";

      message.textContent = "Statut : " + statut;
    }
  });

  if (!trouve) {
    message.textContent = "Code non reconnu / Non valide";
    message.className = "nonvalide";
  }

})
.catch(() => {
  message.textContent = "Erreur de connexion Ã  la base.";
  message.className = "nonvalide";
});

</script>

</body>
</html>
